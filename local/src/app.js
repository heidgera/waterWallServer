'use strict';

obtain(['./src/server/wsServer.js', './src/drawGrid.js'], ({ wss }, { Grid })=> {
  exports.app = {};

  var _ = 1;

  /*var test = [
    [_, _, 0, 0, _, _, 0, 0, _, _, 0, 0],
    [_, _, 0, 0, _, _, 0, 0, _, _, 0, 0],
    [0, 0, _, _, 0, 0, _, _, 0, 0, _, _],
    [0, 0, _, _, 0, 0, _, _, 0, 0, _, _],
    [_, _, 0, 0, _, _, 0, 0, _, _, 0, 0],
    [_, _, 0, 0, _, _, 0, 0, _, _, 0, 0],
    [0, 0, _, _, 0, 0, _, _, 0, 0, _, _],
    [0, 0, _, _, 0, 0, _, _, 0, 0, _, _],
    [_, _, 0, 0, _, _, 0, 0, _, _, 0, 0],
    [_, _, 0, 0, _, _, 0, 0, _, _, 0, 0],
    [0, 0, _, _, 0, 0, _, _, 0, 0, _, _],
    [0, 0, _, _, 0, 0, _, _, 0, 0, _, _],

    /////////////////////////////////////
    [_, _, _, _, 0, 0, 0, 0, _, _, _, _],
    [_, _, _, _, 0, 0, 0, 0, _, _, _, _],
    [_, _, _, _, 0, 0, 0, 0, _, _, _, _],
    [_, _, _, _, 0, 0, 0, 0, _, _, _, _],
    [0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0],
    [0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0],
    [0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0],
    [0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0],
    [_, _, _, _, 0, 0, 0, 0, _, _, _, _],
    [_, _, _, _, 0, 0, 0, 0, _, _, _, _],
    [_, _, _, _, 0, 0, 0, 0, _, _, _, _],
    [_, _, _, _, 0, 0, 0, 0, _, _, _, _],

    /////////////////////////////////////
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, _, _, 0, _, _, 0, 0, 0, 0, 0, 0],
    [_, _, _, _, _, _, _, 0, 0, 0, 0, 0],
    [_, _, _, _, _, _, _, 0, 0, 0, 0, 0],
    [0, _, _, _, _, _, 0, 0, 0, 0, 0, 0],
    [0, 0, _, _, _, 0, 0, _, 0, _, 0, 0],
    [0, 0, 0, _, 0, 0, _, _, _, _, _, 0],
    [0, 0, 0, 0, 0, 0, _, _, _, _, _, 0],
    [0, 0, 0, 0, 0, 0, 0, _, _, _, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, _, 0, 0, 0],

    /////////////////////////////////////
    [_, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [_, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],

    /////////////////////////////////////
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, _, _, 0, 0, 0, 0, _, _, 0, 0],
    [0, 0, _, _, 0, 0, 0, 0, _, _, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, _, 0, 0, 0, 0, 0, 0, 0, 0, _, 0],
    [0, _, _, 0, 0, 0, 0, 0, 0, _, _, 0],
    [0, 0, _, _, _, _, _, _, _, _, 0, 0],
    [0, 0, 0, _, _, _, _, _, _, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  ];*/

  var test = [
    [_, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0],
    [_, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0],
    [0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _],
    [0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _],
    [_, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0],
    [_, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0],
    [0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _],
    [0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _],
    [_, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0],
    [_, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0],
    [0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _],
    [0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _, 0, 0, _, _],

    /////////////////////////////////////
    [_, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0],
    [_, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0],
    [_, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0],
    [_, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0],
    [0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _],
    [0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _],
    [0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _],
    [0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _],
    [_, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0],
    [_, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0],
    [_, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0],
    [_, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0],
    [0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _],
    [0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _],
    [0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _],
    [0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _, 0, 0, 0, 0, _, _, _, _],

    /////////////////////////////////////
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, _, _, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [_, _, _, _, _, _, _, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, _, _, 0, 0, 0, 0],
    [_, _, _, _, _, _, _, 0, 0, 0, 0, 0, 0, 0, _, _, _, _, _, _, _, 0, 0, 0],
    [0, _, _, _, _, _, 0, 0, 0, 0, 0, 0, 0, 0, _, _, _, _, _, _, _, 0, 0, 0],
    [0, 0, _, _, _, 0, 0, _, 0, _, 0, 0, 0, 0, 0, _, _, _, _, _, 0, 0, 0, 0],
    [0, 0, 0, _, 0, 0, _, _, _, _, _, 0, 0, 0, 0, 0, _, _, _, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, _, _, _, _, _, 0, 0, 0, 0, 0, 0, _, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, _, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],

    /////////////////////////////////////
    [_, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, _, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, _, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, _, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, _, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, _],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, _, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, _, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, _, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, _, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [_, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [_, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [_, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [_, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [_, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],

    //////////////////////////////////////
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [_, _, _, _, _, 0, _, 0, _, 0, _, 0, 0, 0, _, _, _, 0, 0, _, _, _, 0, 0],
    [0, 0, _, 0, 0, 0, _, 0, _, 0, _, 0, 0, 0, _, 0, 0, 0, _, 0, 0, 0, _, 0],
    [0, 0, _, 0, 0, 0, _, 0, _, 0, _, 0, 0, 0, _, _, _, 0, _, _, _, _, _, 0],
    [0, 0, _, 0, 0, 0, _, 0, _, 0, _, 0, 0, 0, 0, 0, _, 0, _, 0, 0, 0, _, 0],
    [0, 0, _, 0, 0, 0, _, _, _, 0, _, _, _, 0, _, _, _, 0, _, 0, 0, 0, _, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],

    /////////////////////////////////////
    [0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, _, _, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, _, _, _, 0, 0, 0, 0, 0, 0, _, _, _, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0],
    [0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0],
    [0, _, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, _, 0],
    [0, _, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, _, 0],
    [_, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _],
    [_, 0, 0, 0, 0, 0, 0, _, 0, 0, 0, 0, 0, 0, 0, 0, _, 0, 0, 0, 0, 0, 0, _],
    [_, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, _],
    [0, _, 0, 0, 0, 0, 0, 0, _, _, _, _, _, _, _, _, 0, 0, 0, 0, 0, 0, _, 0],
    [0, _, 0, 0, 0, 0, 0, 0, 0, _, _, _, _, _, _, 0, 0, 0, 0, 0, 0, 0, _, 0],
    [0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0],
    [0, 0, 0, 0, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, _, _, _, 0, 0, 0, 0, 0, 0, _, _, _, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, _, _, _, _, _, _, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
  ];

  exports.app.start = ()=> {
    var grid = Grid(24, 12);
    console.log('started');

    var modules = Math.ceil(grid.wid / 12);

    µ('#send').addEventListener('click', ()=> {

      for (var i = 0; i < modules; i++) {
        wss.send(i, { pixelHeight: 50 });
        wss.send(i, { drawRaster: { data: grid.getSubGrid(((modules - 1) - i) * 12, 12), stamp: Date.now() + 100 } });
      }
    });

    var getTestSubGrid = (start, num)=> test.map(row=>row.slice(start, start + num));

    µ('#demo').addEventListener('click', ()=> {
      for (var i = 0; i < modules; i++) {
        if (wss.orderedClients[i]) {
          wss.send(i, { pixelHeight: 60 });
          wss.send(i, { drawRaster: { data: getTestSubGrid(((modules - 1) - i) * 12, 12), stamp: Date.now() + 100 } });
        }
      }
    });

    µ('#clear').addEventListener('click', grid.clearGrid);
    µ('#fill').addEventListener('click', grid.fillGrid);
    µ('#stripe').addEventListener('click', grid.stripeGrid);
    µ('#check').addEventListener('click', grid.checkGrid);

    var loopInt = null;

    wss.addListener('ip', (ip, data)=> {console.log(`IP address of ${data._id} is ${ip}`);});

    µ('#loop').addEventListener('click', ()=> {
      clearInterval(loopInt);
      wss.send(0, { pixelHeight: 50 });
      loopInt = setInterval(()=> {
        /*if (wss.orderedClients[0]) {
          wss.send(0, { drawRaster: { data: grid.getData(), stamp: Date.now() + 100 } });
        }*/
        for (var i = 0; i < modules; i++) {
          if (wss.orderedClients[i]) {
            wss.send(i, { pixelHeight: 50 });
            wss.send(i, { drawRaster: { data: grid.getSubGrid(((modules - 1) - i) * 12, 12), stamp: Date.now() + 100 } });
          }
        }
      }, 12 * 50);
    });

    µ('#stop').addEventListener('click', ()=> {
      clearInterval(loopInt);
    });

    document.onkeyup = (e)=> {
      var electron = require('electron');
      if (e.which == 27) {
        electron.remote.process.exit();
      }
    };

    var count = test.length - 1;

    wss.onClientConnect = (ws)=> {
      ws.send(JSON.stringify({ pixelHeight: 50 }));
    };

  };

  provide(exports);
});
